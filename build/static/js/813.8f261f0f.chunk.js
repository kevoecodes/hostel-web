"use strict";(self.webpackChunkioms_web=self.webpackChunkioms_web||[]).push([[813],{2661:function(e,n,i){var t=i(1413),s=i(79601),l=i(17592),r=i(17551),a=i(46417),o=(0,l.ZP)((function(e){return(0,a.jsx)(s.Z,(0,t.Z)({elevation:0,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},e))}))((function(e){var n=e.theme;return{"& .MuiPaper-root":{borderRadius:3,marginTop:n.spacing(1),minWidth:140,backgroundColor:n.palette.grey[100],color:"light"===n.palette.mode?"rgb(55, 65, 81)":n.palette.grey[300],boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.03) 0px 0px 0px 0px, rgba(0, 0, 0, 0.03) 0px 10px 7px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px","& .MuiMenu-list":{padding:"4px 0"},"& .MuiMenuItem-root":{"& .MuiSvgIcon-root":{fontSize:18,color:n.palette.text.secondary,marginRight:n.spacing(1.5)},"&:active":{backgroundColor:(0,r.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)}}}}}));n.Z=o},75031:function(e,n,i){var t=i(29439),s=i(51629),l=i(66835),r=i(23477),a=i(24076),o=i(67478),c=i(57861),d=i(47131),h=i(51405),x=i(97649),u=i(69099),g=i(75697),j=i(32499),m=i(2661),Z=i(10237),p=i(17885),b=i(47313),f=i(58467),v=i(8105),C=i(46417);n.Z=function(e){var n=e.bl_charges,i=void 0===n?[]:n,y=e.onNoCharges,_=void 0===y?"No Charges":y,S=(0,b.useState)(null),P=(0,t.Z)(S,2),k=P[0],E=P[1],A=(0,b.useState)(null),w=(0,t.Z)(A,2),T=w[0],I=w[1],D=(0,b.useState)(0),M=(0,t.Z)(D,2),B=M[0],L=M[1],N=(0,b.useState)(10),R=(0,t.Z)(N,2),z=R[0],F=R[1],O=Boolean(k),U=(0,f.s0)(),H=function(){E(null)};return(0,C.jsx)(C.Fragment,{children:i.length>0?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(s.Z,{children:(0,C.jsxs)(l.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,C.jsx)(r.Z,{children:(0,C.jsxs)(a.Z,{children:[(0,C.jsx)(o.Z,{children:"Created At"}),(0,C.jsx)(o.Z,{children:"Charge Number"}),(0,C.jsx)(o.Z,{children:"Bl Number"}),(0,C.jsx)(o.Z,{children:"Charge"}),(0,C.jsx)(o.Z,{children:"Amount"}),(0,C.jsx)(o.Z,{children:"Status"}),(0,C.jsx)(o.Z,{children:"Actions"})]})}),(0,C.jsx)(c.Z,{children:i.slice(B*z,B*z+z).map((function(e,n){return(0,C.jsxs)(a.Z,{hover:!0,role:"checkbox",sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,C.jsx)(o.Z,{children:(0,g.gg)(e.created_at)}),(0,C.jsx)(o.Z,{children:e.charge_number}),(0,C.jsx)(o.Z,{children:e.bill_of_loading.bl_number}),(0,C.jsx)(o.Z,{children:e.charge.name}),(0,C.jsx)(o.Z,{children:e.amount}),(0,C.jsx)(o.Z,{align:"center",children:(0,g.AB)(e.status)}),(0,C.jsx)(o.Z,{children:(0,C.jsxs)("div",{children:[(0,C.jsx)(d.Z,{"aria-label":"more",id:"long-button","aria-controls":O?"demo-customized-menu":void 0,"aria-expanded":O?"true":void 0,disableElevation:!0,"aria-haspopup":"true",onClick:function(n){return i=n,I(e),void E(i.currentTarget);var i},children:(0,C.jsx)(j.Z,{})}),(0,C.jsxs)(m.Z,{id:"demo-customized-menu",anchorEl:k,open:O,onClose:H,MenuListProps:{"aria-labelledby":"demo-customized-menu"},children:[(0,C.jsxs)(h.Z,{onClick:function(){var e;e=T.id,U("/bl-charges/view/"+e,{replace:!0})},children:[(0,C.jsx)(Z.Z,{style:{fontSize:25,color:"green"}}),"View"]}),(0,C.jsxs)(h.Z,{onClick:H,disableRipple:!0,children:[(0,C.jsx)(p.Z,{style:{fontSize:25,color:"red"}}),"Delete"]})]})]})})]},n)}))})]})}),(0,C.jsx)(x.Z,{rowsPerPageOptions:[10,15,20],component:"div",count:i.length,rowsPerPage:z,page:B,onPageChange:function(e,n){L(n)},onRowsPerPageChange:function(e){F(+e.target.value),L(0)}})]}):(0,C.jsx)(v.Z,{image:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",imageStyle:{height:60},description:(0,C.jsx)("span",{children:_}),children:(0,C.jsx)(u.Z,{onClick:function(){U("/bl-charges/add-bl-charge",{replace:!0})},type:"primary",children:"Create Now"})})})}},90813:function(e,n,i){i.r(n),i.d(n,{default:function(){return H}});var t=i(29439),s=i(40621),l=i(9019),r=i(57829),a=i(75697),o=i(57422),c=i(98466),d=i(61805),h=i(47313),x=i(29814),u=i(58467),g=i(36594),j=i(77841),m=i(19536),Z=i(90891),p=i(42832),b=i(69099),f=i(73319),v=i(4869),C=i(31118),y=i(86948),_=i(43065),S=i(46417),P=function(e){var n=e.bl_timeline.map((function(e,n){return{dot:(0,S.jsx)(_.Z,{style:{fontSize:"16px"}}),children:e.activity,label:(0,a.gg)(e.created_at)}}));return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)("div",{id:"scrollableDiv",style:{maxHeight:"40vh",overflow:"auto",padding:"20px"},children:(0,S.jsx)(y.Z,{dataLength:n.length,style:{padding:"10px"},hasMore:n.length<50,endMessage:(0,S.jsx)(m.Z,{plain:!0,children:"It is all, nothing more \ud83e\udd10"}),scrollableTarget:"scrollableDiv",children:(0,S.jsx)(C.Z,{mode:"left",reverse:!0,items:n})})})})},k=i(66149),E=i(33604),A=i(96467),w=i(51629),T=i(66835),I=i(23477),D=i(24076),M=i(67478),B=i(57861),L=i(4117),N=function(e){var n=e.open,i=void 0!==n&&n,t=e.setOpen,s=e.containers,l=void 0===s?[]:s,a=function(){t(!1)};return(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)(k.Z,{fullWidth:!0,maxWidth:"md",open:i,onClose:a,children:[(0,S.jsx)(E.Z,{children:"List of containers"}),(0,S.jsx)(A.Z,{children:(0,S.jsx)(r.Z,{noValidate:!0,component:"form",sx:{display:"flex",flexDirection:"column",m:"auto",width:"fit-content"},children:(0,S.jsx)(w.Z,{children:(0,S.jsxs)(T.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,S.jsx)(I.Z,{children:(0,S.jsxs)(D.Z,{children:[(0,S.jsx)(M.Z,{children:"Container Number"}),(0,S.jsx)(M.Z,{children:"Container Size"})]})}),(0,S.jsx)(B.Z,{children:l.map((function(e,n){return(0,S.jsxs)(D.Z,{hover:!0,role:"checkbox",sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,S.jsx)(M.Z,{children:e.container_no}),(0,S.jsx)(M.Z,{children:e.container_size})]},n)}))})]})})})}),(0,S.jsx)(L.Z,{children:(0,S.jsx)(b.Z,{onClick:a,children:"Close"})})]})})},R=function(e){var n=e.bill_of_loading,i=e.editBlStatus,s=(0,h.useState)(!1),r=(0,t.Z)(s,2),o=r[0],c=r[1];return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(l.ZP,{container:!0,spacing:2,mb:3,mt:1,justifyContent:"space-around",children:[(0,S.jsxs)(l.ZP,{item:!0,xs:6,children:[(0,S.jsx)(m.Z,{children:"Bill Of loading details"}),(0,S.jsxs)(l.ZP,{container:!0,spacing:4,mb:3,mt:1,justifyContent:"space-evenly",children:[(0,S.jsx)(l.ZP,{item:!0,xs:6,children:(0,S.jsx)(f.k,{title:"Consignee Name",value:n.consignee_name})}),(0,S.jsx)(l.ZP,{item:!0,xs:6,children:(0,S.jsx)(f.k,{title:"Consignee Cellphone",value:n.consignee_cellphone})}),(0,S.jsx)(l.ZP,{item:!0,xs:6,children:(0,S.jsx)(f.k,{title:"Consignee Address",value:n.consignee_address})}),(0,S.jsx)(l.ZP,{item:!0,xs:6,children:(0,S.jsx)(f.k,{title:"Created At",value:(0,a.gg)(n.created_at)})}),(0,S.jsx)(l.ZP,{item:!0,xs:6,children:(0,S.jsx)(f.k,{title:"Containers",value:(0,S.jsxs)("div",{children:[(0,S.jsx)("span",{children:(0,S.jsx)("b",{children:n.containers.length})})," ","containers associated"," ",(0,S.jsx)("span",{children:(0,S.jsx)(Z.Z,{onClick:function(){c(!0)},children:"View"})})]})})})]})]}),(0,S.jsxs)(l.ZP,{item:!0,xs:"auto",children:[(0,S.jsx)(m.Z,{children:"Bill of loading Timeline"}),(0,S.jsx)(P,{bl_timeline:n.bl_timeline})]})]}),(0,S.jsx)(l.ZP,{container:!0,justifyContent:"center",children:(0,S.jsx)(v.Z,{title:"PAID AMOUNT",amount:function(){var e=0;return n.bl_charges.forEach((function(n){n.status===d.SU.PAID&&(e+=n.amount)})),e}()})}),(0,S.jsx)(l.ZP,{container:!0,spacing:4,mb:3,mt:1,alignItems:"center",justifyContent:"flex-end",children:(0,S.jsxs)(p.Z,{spacing:2,direction:"row",children:[n.status===d.R2.COMPLETE&&(0,S.jsx)(b.Z,{variant:"outlined",color:"primary",onClick:function(){return i(d.SU.VERIFIED)},children:"Re-open"}),(0,S.jsx)(b.Z,{disabled:!n.bl_charges.every((function(e){return e.status===d.SU.PAID||e.status===d.SU.REJECTED})),variant:"outlined",color:"success",onClick:function(){return i(d.SU.REJECTED)},children:"Mark Done"})]})}),(0,S.jsx)(N,{open:o,setOpen:c,containers:n.containers})]})},z=i(75031),F=i(8105),O=i(71415),U=function(e){var n=e.bill_of_loading,i=(0,h.useState)(!0),s=(0,t.Z)(i,2),r=s[0],a=s[1],o=(0,h.useState)([]),c=(0,t.Z)(o,2),d=c[0],u=c[1];return(0,h.useEffect)((function(){(0,g.kl)(n.id).then((function(e){console.log(e),u(e),a(!1)})).catch((function(e){console.log(e)}))}),[]),(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(x.Ae,{isLoading:r,children:0===d.length?(0,S.jsx)(F.Z,{description:"No attachments"}):(0,S.jsx)(l.ZP,{container:!0,mb:3,mt:1,alignItems:"center",justifyContent:"flex-start",children:(0,S.jsx)(O.Z,{attachments:d})})})})},H=function(){var e=(0,h.useState)(!0),n=(0,t.Z)(e,2),i=n[0],m=n[1],Z=(0,h.useState)(null),p=(0,t.Z)(Z,2),b=p[0],f=p[1],v=(0,h.useState)(d.sy.DETAILS),C=(0,t.Z)(v,2),y=C[0],_=C[1],P=(0,u.s0)(),k=(0,u.UO)(),E=[{label:(0,S.jsx)("div",{style:{padding:4},children:"Details"}),value:d.sy.DETAILS},{label:(0,S.jsx)("div",{style:{padding:4},children:"Attachments"}),value:d.sy.ATTACHMENTS},{label:(0,S.jsxs)("div",{style:{padding:4},children:[(0,S.jsx)("span",{style:{paddingRight:5,paddingBottom:2},children:(0,S.jsx)(o.Z,{count:null!==b?b.bl_charges.length:0,style:{backgroundColor:"#a5a5a9",borderRadius:5}})}),"Bl Charges"]}),value:d.sy.BL_CHARGES}];return(0,h.useEffect)((function(){(0,g.GV)(k.bl_id,!0,!0,!0).then((function(e){console.log(e),f(e),m(!1)})).catch((function(e){console.log(e),j.Z.error("Failed to load Bill of Loading details"),P("/bl-charges",{replace:!0})}))}),[]),(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(x.tv,{isLoading:i,children:null!==b&&(0,S.jsx)(s.Z,{title:(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)(l.ZP,{container:!0,spacing:3,alignItems:"center",children:[(0,S.jsxs)(l.ZP,{item:!0,xs:3,children:["Bl Number: #",b.bl_number]}),(0,S.jsx)(l.ZP,{item:!0,xs:12,md:6,lg:6,sx:{ml:"auto"},children:(0,S.jsx)(l.ZP,{container:!0,alignItems:"center",justifyContent:"flex-end",pr:2,children:(0,a.ec)(b.status)})})]})}),content:!1,border:!1,boxShadow:!0,children:(0,S.jsxs)(r.Z,{sx:{p:{xs:2,sm:3,md:4,xl:5}},children:[(0,S.jsx)(l.ZP,{container:!0,spacing:4,mb:3,mt:1,alignItems:"center",justifyContent:"center",children:(0,S.jsx)(c.Z,{style:{width:"60%"},block:!0,options:E,onChange:function(e){_(e)}})}),y===d.sy.DETAILS&&(0,S.jsx)(R,{bill_of_loading:b,editBlStatus:function(e){}}),y===d.sy.ATTACHMENTS&&(0,S.jsx)(U,{bill_of_loading:b}),y===d.sy.BL_CHARGES&&(0,S.jsx)(z.Z,{bl_charges:b.bl_charges})]})})})})}}}]);