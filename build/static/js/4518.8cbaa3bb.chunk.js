"use strict";(self.webpackChunkioms_web=self.webpackChunkioms_web||[]).push([[4518],{90324:function(n,e,t){t.d(e,{a:function(){return s}});var r=t(1413),o=t(45987),i=(t(42183),t(62870)),u=t(47313),a=t(46417),c=["onChange"],s=(0,u.forwardRef)((function(n,e){var t=n.onChange,u=(0,o.Z)(n,c);return(0,a.jsx)(i.Z,(0,r.Z)((0,r.Z)({},u),{},{getInputRef:e,onValueChange:function(e){t({target:{name:n.name,value:e.value}})},thousandSeparator:!0,valueIsNumericString:!0,prefix:"TZS ",isAllowed:function(n){return n.floatValue<=1e8}}))}))},35509:function(n,e,t){var r=t(1413),o=t(93433),i=t(66736),u=t(55116),a=t(89939),c=t(41209),s=t(46417),l=u.Z.Dragger;e.Z=function(n){var e=n.setFileNames,t={name:"file",multiple:!0,action:c.D.apiURL+"api/v1/upload-file",onChange:function(n){console.log(n);var t=n.file,r=t.status,i=t.response;"uploading"!==r&&console.log(n.file,n.fileList),"done"===r?(e((function(n){return[].concat((0,o.Z)(n),[{file_name:i.name}])})),a.ZP.success("".concat(n.file.name," file uploaded successfully.")).then()):"error"===r&&a.ZP.error("".concat(n.file.name," file upload failed.")).then()},onDrop:function(n){console.log("Dropped files",n.dataTransfer.files)}};return(0,s.jsxs)(l,(0,r.Z)((0,r.Z)({},t),{},{children:[(0,s.jsx)("p",{className:"ant-upload-drag-icon",children:(0,s.jsx)(i.Z,{})}),(0,s.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),(0,s.jsx)("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload. Strictly prohibited from uploading company data or other banned files."})]}))}},75697:function(n,e,t){t.d(e,{AB:function(){return l},Rn:function(){return d},Vo:function(){return h},ec:function(){return s},gg:function(){return f},oB:function(){return p}});var r=t(61805),o=t(66212),i=t(36594),u=t(84296),a=t(77841),c=t(46417),s=function(n){return n===r.R2.PENDING?(0,c.jsx)(o.Z,{color:"secondary",label:"Pending"}):n===r.R2.ONPROGRESS?(0,c.jsx)(o.Z,{color:"primary",label:"On Progress"}):n===r.R2.COMPLETE?(0,c.jsx)(o.Z,{color:"success",label:"Complete"}):void 0},l=function(n){return n===r.SU.PENDING?(0,c.jsx)(o.Z,{color:"secondary",label:"Pending"}):n===r.SU.VERIFIED?(0,c.jsx)(o.Z,{color:"warning",label:"Verified"}):n===r.SU.APPROVED?(0,c.jsx)(o.Z,{color:"success",label:"Approved"}):n===r.SU.PAID?(0,c.jsx)(o.Z,{color:"primary",label:"Paid"}):n===r.SU.REJECTED?(0,c.jsx)(o.Z,{color:"error",label:"Rejected"}):void 0},f=function(n){return new Date(n).toLocaleString()},d=function(n){(0,i.nD)().then((function(e){console.log(e),n(e)})).catch((function(n){console.log(n)}))},p=function(n){return n.toLocaleString("en-US",{style:"currency",currency:"TZS"})},h=function(n){n.response?401===n.response.status?(a.Z.error("Unauthorized request, please login again"),null!==u.VK&&(0,u.VK)("/login",{replace:!0}),localStorage.clear()):400===n.response.status||500===n.response.status||n.response&&429===n.response.status||console.log("Error occurred, status: "+n.response.status):a.Z.error("No network available, Please connect to a Network")}},77841:function(n,e,t){var r=t(15671),o=t(43144),i=t(84296),u=function(){function n(){(0,r.Z)(this,n)}return(0,o.Z)(n,[{key:"success",value:function(n){i.sp&&i.sp.enqueueSnackbar(n,{variant:"success"})}},{key:"error",value:function(n){i.sp&&i.sp.enqueueSnackbar(n,{variant:"error"})}},{key:"warning",value:function(n){i.sp&&i.sp.enqueueSnackbar(n,{variant:"warning"})}}]),n}();e.Z=new u},94518:function(n,e,t){t.r(e);var r=t(1413),o=t(74165),i=t(15861),u=t(29439),a=t(3463),c=t(57829),s=t(9019),l=t(23306),f=t(24631),d=t(42832),p=t(49914),h=t(15480),g=t(19536),m=t(69490),v=t(7410),Z=t(47313),x=t(40621),b=t(36594),S=t(77841),j=t(58467),P=t(44178),w=t(51406),E=t(35509),C=t(90324),R=t(46417);e.default=function(){var n=(0,Z.useState)(!1),e=(0,u.Z)(n,2),t=e[0],k=e[1],D=(0,Z.useState)(null),y=(0,u.Z)(D,2),N=y[0],L=y[1],A=(0,Z.useState)(null),I=(0,u.Z)(A,2),O=I[0],T=I[1],_=(0,Z.useState)([]),U=(0,u.Z)(_,2),V=U[0],B=U[1],G=(0,Z.useState)([]),q=(0,u.Z)(G,2),F=q[0],z=q[1],H=(0,Z.useState)([]),J=(0,u.Z)(H,2),M=J[0],W=J[1],K=(0,j.s0)(),Q=(0,j.TH)(),Y=new URLSearchParams(Q.search).get("bl"),X=function(){(0,b.r2)().then((function(n){console.log(n),z(n.results),void 0!==Y&&(0,b.GV)(Y).then((function(n){L(n)})).catch((function(n){console.log(n)}))})).catch((function(n){console.log(n)}))};(0,Z.useEffect)((function(){(0,b.CT)().then((function(n){console.log(n),B(n.results)})).catch((function(n){console.log(n)})),X()}),[]);var $=function(n){if(null!==O&&null!==N){k(!0);var e={amount:n.amount,bill_of_loading:N.id,charge:O.id,attachments:M};(0,b.SP)(e).then((function(n){console.log(n),S.Z.success("Bill of loading Charge successfully created"),K("/bl-charges",{replace:!0})})).catch((function(n){S.Z.error("Failed to add Bill of loading charge"),k(!1),console.log(n)}))}};return(0,R.jsx)(R.Fragment,{children:(0,R.jsx)(x.Z,{title:"Adding Bill Of Loading Charge",content:!1,border:!1,boxShadow:!0,children:(0,R.jsx)(c.Z,{sx:{p:{xs:2,sm:3,md:4,xl:5}},children:(0,R.jsx)(v.J9,{initialValues:{amount:"",submit:null},validationSchema:a.Ry().shape({amount:a.Z_().max(7).required("Amount is required")}),onSubmit:function(){var n=(0,i.Z)((0,o.Z)().mark((function n(e,t){return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.setErrors,t.setStatus,t.setSubmitting,$(e);case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),children:function(n){var e=n.errors,o=n.handleBlur,i=n.handleChange,u=n.handleSubmit,a=(n.isSubmitting,n.touched),v=n.values;return(0,R.jsxs)("form",{noValidate:!0,onSubmit:u,children:[(0,R.jsxs)(s.ZP,{container:!0,spacing:3,mb:3,children:[(0,R.jsxs)(s.ZP,{item:!0,xs:6,children:[(0,R.jsx)(l.Z,{htmlFor:"bootstrap",children:"Bill Of Loading"}),(0,R.jsx)(P.Z,{id:"bl-select",sx:{width:"100%"},options:F,value:N,onChange:function(n,e){L(e)},autoHighlight:!0,getOptionLabel:function(n){return n.bl_number+" "+n.consignee_name},renderOption:function(n,e){return(0,R.jsxs)(c.Z,(0,r.Z)((0,r.Z)({component:"li"},n),{},{children:[e.bl_number," ",e.consignee_name]}))},renderInput:function(n){return(0,R.jsx)(f.Z,(0,r.Z)((0,r.Z)({},n),{},{inputProps:(0,r.Z)((0,r.Z)({},n.inputProps),{},{autoComplete:"new-password"})}))}})]}),(0,R.jsxs)(s.ZP,{item:!0,xs:6,children:[(0,R.jsx)(l.Z,{htmlFor:"bootstrap",children:"Charge"}),(0,R.jsx)(P.Z,{id:"charge-select",sx:{width:"100%"},options:V,autoHighlight:!0,value:O,onChange:function(n,e){T(e)},getOptionLabel:function(n){return n.name},renderOption:function(n,e){return(0,R.jsx)(c.Z,(0,r.Z)((0,r.Z)({component:"li"},n),{},{children:e.name}))},renderInput:function(n){return(0,R.jsx)(f.Z,(0,r.Z)((0,r.Z)({},n),{},{inputProps:(0,r.Z)((0,r.Z)({},n.inputProps),{},{autoComplete:"new-password"})}))}})]})]}),(0,R.jsxs)(s.ZP,{container:!0,spacing:3,mb:3,children:[(0,R.jsx)(s.ZP,{item:!0,xs:4,children:(0,R.jsxs)(d.Z,{spacing:1,children:[(0,R.jsx)(l.Z,{htmlFor:"bootstrap",children:"Amount"}),(0,R.jsx)(p.Z,{id:"email-login",type:"text",value:v.amount,name:"amount",onBlur:o,onChange:i,placeholder:"eg. TZS 4,050,000",inputComponent:C.a,fullWidth:!0,error:Boolean(a.amount&&e.amount)}),a.amount&&e.amount&&(0,R.jsx)(h.Z,{error:!0,id:"standard-weight-helper-text-email-login",children:e.amount})]})}),(0,R.jsx)(s.ZP,{item:!0,xs:8,children:(0,R.jsxs)(d.Z,{spacing:1,children:[(0,R.jsx)(g.Z,{children:"Attachments"}),(0,R.jsx)(E.Z,{setFileNames:W})]})})]}),(0,R.jsx)(s.ZP,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",mg:3,children:(0,R.jsx)(s.ZP,{item:!0,xs:6,children:(0,R.jsx)(m.Z,{children:(0,R.jsx)(w.Z,{disableElevation:!0,loading:t,disabled:t,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Submit"})})})})]})}})})})})}},36594:function(n,e,t){t.d(e,{AG:function(){return y},Bl:function(){return I},Bm:function(){return N},CT:function(){return w},GV:function(){return j},Gn:function(){return R},HL:function(){return k},JN:function(){return L},MI:function(){return T},OP:function(){return p},PB:function(){return b},Q4:function(){return O},Qb:function(){return l},SP:function(){return C},Um:function(){return g},W0:function(){return _},b6:function(){return A},bu:function(){return Z},gi:function(){return h},kA:function(){return v},kl:function(){return P},l2:function(){return E},nD:function(){return m},r2:function(){return S},rW:function(){return d},tk:function(){return U},vU:function(){return x},vy:function(){return f},xr:function(){return D}});var r=t(56573),o=t(41209),i=t(75697);function u(n,e){return new Promise((function(t,u){r.Z.post(o.D.apiURL+n,e).then((function(n){n.headers,t(n.data)})).catch((function(n){(0,i.Vo)(n),u(n)}))}))}function a(n){return new Promise((function(e,t){r.Z.get(o.D.apiURL+n,{headers:{Authorization:"Token "+JSON.parse(localStorage.getItem("token"))}}).then((function(n){e(n.data)})).catch((function(n){(0,i.Vo)(n),t(n)}))}))}function c(n,e){return new Promise((function(t,u){r.Z.post(o.D.apiURL+n,e,{headers:{Authorization:"Token "+JSON.parse(localStorage.getItem("token"))}}).then((function(n){t(n.data)})).catch((function(n){(0,i.Vo)(n),u(n)}))}))}function s(n,e){return new Promise((function(t,u){r.Z.put(o.D.apiURL+n,e,{headers:{Authorization:"Token "+JSON.parse(localStorage.getItem("token"))}}).then((function(n){t(n.data)})).catch((function(n){(0,i.Vo)(n),u(n)}))}))}function l(n,e){var t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r={};return""!==t&&(r.mfaCode=t),u("api/auth/login",{email:n,password:e},!1)}function f(n,e,t){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o={};return""!==r&&(o.mfaCode=r),c("api/auth/reset-password/"+t,{password:n,confirm_password:e},!1)}function d(){return a("api/v1/users-list/")}function p(n){return c("api/v1/register-user",n)}function h(n){return a("api/v1/user/"+n)}function g(n,e){return s("api/v1/user/"+n,e)}function m(){return a("api/v1/roles")}function v(n){return c("api/v1/roles",n)}function Z(n,e){return s("api/v1/role/"+n,e)}function x(n){return a("api/v1/role/"+n)}function b(n){return c("api/v1/bls",n)}function S(){return a("api/v1/bls-list/")}function j(n){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=[e?"include_charges=".concat("true"):"",t?"include_timeline=".concat("true"):"",r?"include_containers=".concat("true"):""].filter(Boolean).join("&"),i="api/v1/bl/".concat(n).concat(o?"?".concat(o):"");return a(i)}function P(n){return a("api/v1/bl-attachments?bl_id="+n)}function w(){return a("api/v1/charges-list/")}function E(){return a("api/v1/bl-charges-list/")}function C(n){return c("api/v1/bl-charges",n)}function R(n){return a("api/v1/bl-charge/"+n)}function k(n,e){return s("api/v1/bl-charge/"+n,e)}function D(n){return a("api/v1/bl-charge-attachments?bl_charge_id="+n)}function y(n){return c("api/v1/vouchers",n)}function N(){return a("api/v1/vouchers-list/")}function L(n){return a("api/v1/voucher/"+n)}function A(n,e){return s("api/v1/voucher/"+n,e)}function I(n){return a("api/v1/voucher-attachments?voucher_id="+n)}function O(){return a("api/v1/float-requests-list/")}function T(n){return a("api/v1/float-request/"+n)}function _(n){return c("api/v1/float-requests",n)}function U(){return a("api/v1/dash-stats")}},41209:function(n,e,t){t.d(e,{D:function(){return r}});var r={apiURL:"https://api.starvisiontz.com/",socketURL:"wss://socket.starvisiontz.com/",mediaURL:"https://media.starvisiontz.com/v1/"}},61805:function(n,e,t){t.d(e,{J:function(){return u},R2:function(){return o},SU:function(){return r},sy:function(){return i}});var r={PENDING:0,VERIFIED:1,APPROVED:2,PAID:3,REJECTED:4},o={PENDING:0,ONPROGRESS:1,COMPLETE:2},i={DETAILS:"0",ATTACHMENTS:"1",BL_CHARGES:"2"},u={TODAY:"today",THIS_WEEK:"this_week",MONTHLY:"monthly"}}}]);