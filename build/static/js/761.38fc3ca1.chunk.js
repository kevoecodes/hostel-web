"use strict";(self.webpackChunkioms_web=self.webpackChunkioms_web||[]).push([[761],{75697:function(n,e,r){r.d(e,{An:function(){return h},CI:function(){return u},Rn:function(){return f},Tj:function(){return l},Vo:function(){return p},gg:function(){return d},oB:function(){return m},un:function(){return x}});var t=r(61805),i=r(66212),o=r(22098),s=r(54427),a=r(77841),c=r(46417),u=function(n){return n?(0,c.jsx)(i.Z,{color:"success",label:"Taken"}):(0,c.jsx)(i.Z,{color:"primary",label:"Open"})},l=function(n){return n===t.yd.PENDING?(0,c.jsx)(i.Z,{color:"secondary",label:"Pending"}):n===t.yd.ACCEPTED?(0,c.jsx)(i.Z,{color:"success",label:"Accepted"}):n===t.yd.REJECTED?(0,c.jsx)(i.Z,{color:"error",label:"Rejected"}):void 0},d=function(n){return new Date(n).toLocaleString()},h=function(n){return 1===n?"Admin":2===n?"User":void 0},f=function(n){(0,o.nD)().then((function(e){console.log(e),n(e)})).catch((function(n){console.log(n)}))},m=function(n){return n.toLocaleString("en-US",{style:"currency",currency:"TZS"})},p=function(n){n.response?401===n.response.status?(a.Z.error("Unauthorized request, please login again"),null!==s.VK&&(0,s.VK)("/login",{replace:!0}),localStorage.clear()):400===n.response.status||500===n.response.status||n.response&&429===n.response.status||console.log("Error occurred, status: "+n.response.status):a.Z.error("No network available, Please connect to a Network")};function x(n){var e=n.slice(0,3),r=n.slice(3);return 9===r.length?{countryCode:e,phoneNumber:r}:{countryCode:"255",phoneNumber:"1".repeat(9)}}},77841:function(n,e,r){var t=r(15671),i=r(43144),o=r(54427),s=function(){function n(){(0,t.Z)(this,n)}return(0,i.Z)(n,[{key:"success",value:function(n){o.sp&&o.sp.enqueueSnackbar(n,{variant:"success"})}},{key:"error",value:function(n){o.sp&&o.sp.enqueueSnackbar(n,{variant:"error"})}},{key:"warning",value:function(n){o.sp&&o.sp.enqueueSnackbar(n,{variant:"warning"})}}]),n}();e.Z=new s},91905:function(n,e,r){r.d(e,{Z:function(){return Z}});var t=r(57829),i=r(9019),o=r(1413),s=r(45987),a=r(97402),c=r(46417),u=["children"],l=function(n){var e=n.children,r=(0,s.Z)(n,u);return(0,c.jsx)(a.Z,(0,o.Z)((0,o.Z)({sx:{maxWidth:{xs:400,lg:475},margin:{xs:2.5,md:3},"& > *":{flexGrow:1,flexBasis:"50%"}},content:!1},r),{},{border:!1,boxShadow:!0,shadow:function(n){return n.customShadows.z1},children:(0,c.jsx)(t.Z,{sx:{p:{xs:2,sm:3,md:4,xl:5}},children:e})}))},d=r(16406),h=r(24813),f=r(47825),m=r(42832),p=r(61113),x=r(90891),g=function(){var n=(0,h.Z)((function(n){return n.breakpoints.down("sm")}));return(0,c.jsx)(f.Z,{maxWidth:"xl",children:(0,c.jsxs)(m.Z,{direction:n?"column":"row",justifyContent:n?"center":"space-between",spacing:2,textAlign:n?"center":"inherit",children:[(0,c.jsx)(p.Z,{variant:"subtitle2",color:"secondary",component:"span",children:"\xa9 Abdul (DIT)"}),(0,c.jsxs)(m.Z,{direction:n?"column":"row",spacing:n?1:3,textAlign:n?"center":"inherit",children:[(0,c.jsx)(p.Z,{variant:"subtitle2",color:"secondary",component:x.Z,href:"#",target:"_blank",underline:"hover",children:"Privacy Policy"}),(0,c.jsx)(p.Z,{variant:"subtitle2",color:"secondary",component:x.Z,href:"#",target:"_blank",underline:"hover",children:"Support"})]})]})})},Z=function(n){var e=n.children;return(0,c.jsx)(t.Z,{sx:{minHeight:"100vh"},children:(0,c.jsxs)(i.ZP,{container:!0,direction:"column",justifyContent:"flex-end",sx:{minHeight:"100vh"},children:[(0,c.jsx)(i.ZP,{item:!0,xs:12,sx:{ml:3,mt:3},children:(0,c.jsx)(d.Z,{})}),(0,c.jsx)(i.ZP,{item:!0,xs:12,children:(0,c.jsx)(i.ZP,{item:!0,xs:12,container:!0,justifyContent:"center",alignItems:"center",sx:{minHeight:{xs:"calc(100vh - 134px)",md:"calc(100vh - 112px)"}},children:(0,c.jsx)(i.ZP,{item:!0,children:(0,c.jsx)(l,{children:e})})})}),(0,c.jsx)(i.ZP,{item:!0,xs:12,sx:{m:3,mt:1},children:(0,c.jsx)(g,{})})]})})}},71761:function(n,e,r){r.r(e),r.d(e,{default:function(){return _}});var t=r(9019),i=r(42832),o=r(61113),s=r(74165),a=r(15861),c=r(70885),u=r(47313),l=r(2135),d=r(23306),h=r(37843),f=r(15480),m=r(41727),p=r(47131),x=r(83929),g=r(46330),Z=r(90891),v=r(28089),j=r(7410),w=r(69490),b=r(58467),y=r(22098),S=r(51406),k=r(31741),P=r(44874),C=r(1413),E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M521.7 82c-152.5-.4-286.7 78.5-363.4 197.7-3.4 5.3.4 12.3 6.7 12.3h70.3c4.8 0 9.3-2.1 12.3-5.8 7-8.5 14.5-16.7 22.4-24.5 32.6-32.5 70.5-58.1 112.7-75.9 43.6-18.4 90-27.8 137.9-27.8 47.9 0 94.3 9.3 137.9 27.8 42.2 17.8 80.1 43.4 112.7 75.9 32.6 32.5 58.1 70.4 76 112.5C865.7 417.8 875 464.1 875 512c0 47.9-9.4 94.2-27.8 137.8-17.8 42.1-43.4 80-76 112.5s-70.5 58.1-112.7 75.9A352.8 352.8 0 01520.6 866c-47.9 0-94.3-9.4-137.9-27.8A353.84 353.84 0 01270 762.3c-7.9-7.9-15.3-16.1-22.4-24.5-3-3.7-7.6-5.8-12.3-5.8H165c-6.3 0-10.2 7-6.7 12.3C234.9 863.2 368.5 942 520.6 942c236.2 0 428-190.1 430.4-425.6C953.4 277.1 761.3 82.6 521.7 82zM395.02 624v-76h-314c-4.4 0-8-3.6-8-8v-56c0-4.4 3.6-8 8-8h314v-76c0-6.7 7.8-10.5 13-6.3l141.9 112a8 8 0 010 12.6l-141.9 112c-5.2 4.1-13 .4-13-6.3z"}}]},name:"login",theme:"outlined"},A=r(20262),I=function(n,e){return u.createElement(A.Z,(0,C.Z)((0,C.Z)({},n),{},{ref:e,icon:E}))};I.displayName="LoginOutlined";var N=u.forwardRef(I),T=r(77841),D=r(95795),O=r(46417),z=function(){var n=(0,u.useState)(!1),e=(0,c.Z)(n,2),r=e[0],C=e[1],E=(0,u.useState)(!1),A=(0,c.Z)(E,2),I=A[0],z=A[1],J=(0,u.useState)(!1),_=(0,c.Z)(J,2),B=_[0],V=_[1],q=(0,b.s0)(),L=function(){z(!I)},U=function(n){n.preventDefault()},W=function(n){V(!0),(0,y.Qb)(n.email,n.password).then((function(n){var e=n.token,r=n.user,t=n.user.id;localStorage.setItem("token",JSON.stringify(e)),localStorage.setItem("user_id",JSON.stringify(t)),localStorage.setItem("user",JSON.stringify(r)),T.Z.success("Signed in successfully"),D.Z.getUser(),console.log(r),q({pathname:"/"},{replace:!0})})).catch((function(n){console.log(n),T.Z.error("Invalid credentials"),V(!1)}))};return(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(j.J9,{initialValues:{email:"",password:"",submit:null},validationSchema:v.Ry().shape({email:v.Z_().email("Must be a valid email").max(255).required("Email is required"),password:v.Z_().max(255).required("Password is required")}),onSubmit:function(){var n=(0,a.Z)((0,s.Z)().mark((function n(e,r){return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r.setErrors,r.setStatus,r.setSubmitting,W(e);case 2:case"end":return n.stop()}}),n)})));return function(e,r){return n.apply(this,arguments)}}(),children:function(n){var e=n.errors,s=n.handleBlur,a=n.handleChange,c=n.handleSubmit,u=(n.isSubmitting,n.touched),v=n.values;return(0,O.jsx)("form",{noValidate:!0,onSubmit:c,children:(0,O.jsxs)(t.ZP,{container:!0,spacing:3,children:[(0,O.jsx)(t.ZP,{item:!0,xs:12,children:(0,O.jsxs)(i.Z,{spacing:1,children:[(0,O.jsx)(d.Z,{htmlFor:"email-login",children:"Email Address"}),(0,O.jsx)(h.Z,{id:"email-login",type:"email",value:v.email,name:"email",onBlur:s,onChange:a,placeholder:"Enter email address",fullWidth:!0,error:Boolean(u.email&&e.email)}),u.email&&e.email&&(0,O.jsx)(f.Z,{error:!0,id:"standard-weight-helper-text-email-login",children:e.email})]})}),(0,O.jsx)(t.ZP,{item:!0,xs:12,children:(0,O.jsxs)(i.Z,{spacing:1,children:[(0,O.jsx)(d.Z,{htmlFor:"password-login",children:"Password"}),(0,O.jsx)(h.Z,{fullWidth:!0,error:Boolean(u.password&&e.password),id:"-password-login",type:I?"text":"password",value:v.password,name:"password",onBlur:s,onChange:a,endAdornment:(0,O.jsx)(m.Z,{position:"end",children:(0,O.jsx)(p.Z,{"aria-label":"toggle password visibility",onClick:L,onMouseDown:U,edge:"end",size:"large",children:I?(0,O.jsx)(k.Z,{}):(0,O.jsx)(P.Z,{})})}),placeholder:"Enter password"}),u.password&&e.password&&(0,O.jsx)(f.Z,{error:!0,id:"standard-weight-helper-text-password-login",children:e.password})]})}),(0,O.jsx)(t.ZP,{item:!0,xs:12,sx:{mt:-1},children:(0,O.jsxs)(i.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2,children:[(0,O.jsx)(x.Z,{control:(0,O.jsx)(g.Z,{checked:r,onChange:function(n){return C(n.target.checked)},name:"checked",color:"primary",size:"small"}),label:(0,O.jsx)(o.Z,{variant:"h6",children:"Keep me sign in"})}),(0,O.jsx)(Z.Z,{variant:"h6",component:l.rU,to:"",color:"text.primary",children:"Forgot Password?"})]})}),e.submit&&(0,O.jsx)(t.ZP,{item:!0,xs:12,children:(0,O.jsx)(f.Z,{error:!0,children:e.submit})}),(0,O.jsx)(t.ZP,{item:!0,xs:12,children:(0,O.jsx)(w.Z,{children:(0,O.jsx)(S.Z,{loading:B,disableElevation:!0,disabled:B,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",endIcon:(0,O.jsx)(N,{}),loadingPosition:"end",children:"Login"})})})]})})}})})},J=r(91905),_=function(){return(0,O.jsx)(J.Z,{children:(0,O.jsxs)(t.ZP,{container:!0,spacing:3,children:[(0,O.jsx)(t.ZP,{item:!0,xs:12,children:(0,O.jsx)(i.Z,{direction:"row",justifyContent:"space-between",alignItems:"baseline",sx:{mb:{xs:-.5,sm:.5}},children:(0,O.jsx)(o.Z,{variant:"h3",children:"Login"})})}),(0,O.jsx)(t.ZP,{item:!0,xs:12,children:(0,O.jsx)(z,{})})]})})}},22098:function(n,e,r){r.d(e,{LK:function(){return b},kA:function(){return g},bu:function(){return Z},Um:function(){return p},Bf:function(){return w},Ar:function(){return j},vU:function(){return v},nD:function(){return x},gi:function(){return m},rW:function(){return h},Qb:function(){return l},OP:function(){return f},yi:function(){return y},vy:function(){return d}});var t=r(56573),i="http://161.35.210.153:8500/",o=r(75697);function s(n,e){return new Promise((function(r,s){t.Z.post(i+n,e).then((function(n){n.headers,r(n.data)})).catch((function(n){(0,o.Vo)(n),s(n)}))}))}function a(n){return new Promise((function(e,r){t.Z.get(i+n,{headers:{Authorization:"Token "+JSON.parse(localStorage.getItem("token"))}}).then((function(n){e(n.data)})).catch((function(n){(0,o.Vo)(n),r(n)}))}))}function c(n,e){return new Promise((function(r,s){t.Z.post(i+n,e,{headers:{Authorization:"Token "+JSON.parse(localStorage.getItem("token"))}}).then((function(n){r(n.data)})).catch((function(n){(0,o.Vo)(n),s(n)}))}))}function u(n,e){return new Promise((function(r,s){t.Z.put(i+n,e,{headers:{Authorization:"Token "+JSON.parse(localStorage.getItem("token"))}}).then((function(n){r(n.data)})).catch((function(n){(0,o.Vo)(n),s(n)}))}))}function l(n,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",t={};return""!==r&&(t.mfaCode=r),s("api/auth/login-user",{email:n,password:e},!1)}function d(n,e,r){var t=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i={};return""!==t&&(i.mfaCode=t),c("api/auth/reset-password/"+r,{password:n,confirm_password:e},!1)}function h(){return a("api/v1/users-list/")}function f(n){return c("api/v1/register-user",n)}function m(n){return a("api/v1/user/"+n)}function p(n,e){return u("api/v1/user/"+n,e)}function x(){return a("api/v1/roles")}function g(n){return c("api/v1/roles",n)}function Z(n,e){return u("api/v1/role/"+n,e)}function v(n){return a("api/v1/role/"+n)}function j(){return a("api/v1/hostels-list/")}function w(){return a("api/v1/booked-hostels-list/")}function b(n){return u("api/v1/accept-hostel-book/"+n,{})}function y(n){return u("api/v1/reject-hostel-book/"+n,{})}},61805:function(n,e,r){r.d(e,{J:function(){return i},yd:function(){return t}});var t={PENDING:0,ACCEPTED:1,REJECTED:2},i={TODAY:"today",THIS_WEEK:"this_week",MONTHLY:"monthly"}}}]);