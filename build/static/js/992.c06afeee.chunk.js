"use strict";(self.webpackChunkioms_web=self.webpackChunkioms_web||[]).push([[992],{2661:function(n,e,t){var r=t(1413),o=t(79601),i=t(17592),c=t(17551),u=t(46417),s=(0,i.ZP)((function(n){return(0,u.jsx)(o.Z,(0,r.Z)({elevation:0,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},n))}))((function(n){var e=n.theme;return{"& .MuiPaper-root":{borderRadius:3,marginTop:e.spacing(1),minWidth:140,backgroundColor:e.palette.grey[100],color:"light"===e.palette.mode?"rgb(55, 65, 81)":e.palette.grey[300],boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.03) 0px 0px 0px 0px, rgba(0, 0, 0, 0.03) 0px 10px 7px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px","& .MuiMenu-list":{padding:"4px 0"},"& .MuiMenuItem-root":{"& .MuiSvgIcon-root":{fontSize:18,color:e.palette.text.secondary,marginRight:e.spacing(1.5)},"&:active":{backgroundColor:(0,c.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity)}}}}}));e.Z=s},75697:function(n,e,t){t.d(e,{An:function(){return d},CI:function(){return a},Rn:function(){return p},Tj:function(){return l},Vo:function(){return g},gg:function(){return f},oB:function(){return h},un:function(){return x}});var r=t(61805),o=t(66212),i=t(22098),c=t(54427),u=t(77841),s=t(46417),a=function(n){return n?(0,s.jsx)(o.Z,{color:"success",label:"Taken"}):(0,s.jsx)(o.Z,{color:"primary",label:"Open"})},l=function(n){return n===r.yd.PENDING?(0,s.jsx)(o.Z,{color:"secondary",label:"Pending"}):n===r.yd.ACCEPTED?(0,s.jsx)(o.Z,{color:"success",label:"Accepted"}):n===r.yd.REJECTED?(0,s.jsx)(o.Z,{color:"error",label:"Rejected"}):void 0},f=function(n){return new Date(n).toLocaleString()},d=function(n){return 1===n?"Admin":2===n?"User":void 0},p=function(n){(0,i.nD)().then((function(e){console.log(e),n(e)})).catch((function(n){console.log(n)}))},h=function(n){return n.toLocaleString("en-US",{style:"currency",currency:"TZS"})},g=function(n){n.response?401===n.response.status?(u.Z.error("Unauthorized request, please login again"),null!==c.VK&&(0,c.VK)("/login",{replace:!0}),localStorage.clear()):400===n.response.status||500===n.response.status||n.response&&429===n.response.status||console.log("Error occurred, status: "+n.response.status):u.Z.error("No network available, Please connect to a Network")};function x(n){var e=n.slice(0,3),t=n.slice(3);return 9===t.length?{countryCode:e,phoneNumber:t}:{countryCode:"255",phoneNumber:"1".repeat(9)}}},77841:function(n,e,t){var r=t(15671),o=t(43144),i=t(54427),c=function(){function n(){(0,r.Z)(this,n)}return(0,o.Z)(n,[{key:"success",value:function(n){i.sp&&i.sp.enqueueSnackbar(n,{variant:"success"})}},{key:"error",value:function(n){i.sp&&i.sp.enqueueSnackbar(n,{variant:"error"})}},{key:"warning",value:function(n){i.sp&&i.sp.enqueueSnackbar(n,{variant:"warning"})}}]),n}();e.Z=new c},95992:function(n,e,t){t.r(e);var r=t(70885),o=t(47313),i=t(58467),c=t(97402),u=t(9019),s=t(70501),a=t(51629),l=t(66835),f=t(23477),d=t(24076),p=t(67478),h=t(57861),g=t(47131),x=t(51405),Z=t(97649),m=t(75697),v=t(32499),b=t(2661),j=t(10237),k=t(17885),y=t(22098),S=t(77841),w=t(46417);e.default=function(){var n=(0,o.useState)(null),e=(0,r.Z)(n,2),t=e[0],P=e[1],C=(0,o.useState)([]),E=(0,r.Z)(C,2),T=E[0],A=E[1],N=(0,o.useState)(null),z=(0,r.Z)(N,2),O=z[0],D=z[1],I=(0,o.useState)(0),R=(0,r.Z)(I,2),M=R[0],V=R[1],_=(0,o.useState)(10),J=(0,r.Z)(_,2),L=J[0],U=J[1],q=((0,i.s0)(),Boolean(t)),B=function(){P(null)},F=function(){(0,y.Bf)().then((function(n){console.log(n),A(n.results)})).catch((function(n){console.log(n)}))},K=function(){(0,y.yi)(O.id).then((function(n){F(),S.Z.success("Successfully rejected booking")})).catch((function(n){S.Z.error("Failed to reject booking")}))};return(0,o.useEffect)((function(){F()}),[]),(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(c.Z,{title:(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(u.ZP,{container:!0,spacing:3,alignItems:"center",children:(0,w.jsx)(u.ZP,{item:!0,children:"All Booked Hostels"})})}),children:(0,w.jsxs)(s.Z,{children:[(0,w.jsx)(a.Z,{children:(0,w.jsxs)(l.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,w.jsx)(f.Z,{children:(0,w.jsxs)(d.Z,{children:[(0,w.jsx)(p.Z,{children:"Created At"}),(0,w.jsx)(p.Z,{children:"Hostel Name"}),(0,w.jsx)(p.Z,{children:"User"}),(0,w.jsx)(p.Z,{children:"Status"}),(0,w.jsx)(p.Z,{children:"Actions"})]})}),(0,w.jsx)(h.Z,{children:T.slice(M*L,M*L+L).map((function(n,e){return(0,w.jsxs)(d.Z,{hover:!0,role:"checkbox",sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,w.jsx)(p.Z,{children:(0,m.gg)(n.created_at)}),(0,w.jsx)(p.Z,{children:n.hostel.name}),(0,w.jsx)(p.Z,{children:n.user.full_name}),(0,w.jsx)(p.Z,{children:(0,m.Tj)(n.status)}),(0,w.jsx)(p.Z,{children:(0,w.jsxs)("div",{children:[(0,w.jsx)(g.Z,{"aria-label":"more",id:"long-button","aria-controls":q?"demo-customized-menu":void 0,"aria-expanded":q?"true":void 0,disableElevation:!0,"aria-haspopup":"true",onClick:function(e){return function(n,e){D(e),P(n.currentTarget)}(e,n)},children:(0,w.jsx)(v.Z,{})}),(0,w.jsxs)(b.Z,{id:"demo-customized-menu",anchorEl:t,open:q,onClose:B,MenuListProps:{"aria-labelledby":"demo-customized-menu"},children:[(0,w.jsxs)(x.Z,{onClick:function(){(0,y.LK)(O.id).then((function(n){F(),S.Z.success("Successfully accepted booking")})).catch((function(n){S.Z.error("Failed to accept booking")}))},children:[(0,w.jsx)(j.Z,{style:{fontSize:25,color:"green"}}),"Accept"]}),(0,w.jsxs)(x.Z,{onClick:K,disableRipple:!0,children:[(0,w.jsx)(k.Z,{style:{fontSize:25,color:"red"}}),"Reject"]})]})]})})]},e)}))})]})}),(0,w.jsx)(Z.Z,{rowsPerPageOptions:[10,15,20],component:"div",count:T.length,rowsPerPage:L,page:M,onPageChange:function(n,e){V(e)},onRowsPerPageChange:function(n){U(+n.target.value),V(0)}})]})})})}},22098:function(n,e,t){t.d(e,{LK:function(){return k},kA:function(){return Z},bu:function(){return m},Um:function(){return g},Bf:function(){return j},Ar:function(){return b},vU:function(){return v},nD:function(){return x},gi:function(){return h},rW:function(){return d},Qb:function(){return l},OP:function(){return p},yi:function(){return y},vy:function(){return f}});var r=t(56573),o="http://161.35.210.153:8500/",i=t(75697);function c(n,e){return new Promise((function(t,c){r.Z.post(o+n,e).then((function(n){n.headers,t(n.data)})).catch((function(n){(0,i.Vo)(n),c(n)}))}))}function u(n){return new Promise((function(e,t){r.Z.get(o+n,{headers:{Authorization:"Token "+JSON.parse(localStorage.getItem("token"))}}).then((function(n){e(n.data)})).catch((function(n){(0,i.Vo)(n),t(n)}))}))}function s(n,e){return new Promise((function(t,c){r.Z.post(o+n,e,{headers:{Authorization:"Token "+JSON.parse(localStorage.getItem("token"))}}).then((function(n){t(n.data)})).catch((function(n){(0,i.Vo)(n),c(n)}))}))}function a(n,e){return new Promise((function(t,c){r.Z.put(o+n,e,{headers:{Authorization:"Token "+JSON.parse(localStorage.getItem("token"))}}).then((function(n){t(n.data)})).catch((function(n){(0,i.Vo)(n),c(n)}))}))}function l(n,e){var t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r={};return""!==t&&(r.mfaCode=t),c("api/auth/login-user",{email:n,password:e},!1)}function f(n,e,t){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o={};return""!==r&&(o.mfaCode=r),s("api/auth/reset-password/"+t,{password:n,confirm_password:e},!1)}function d(){return u("api/v1/users-list/")}function p(n){return s("api/v1/register-user",n)}function h(n){return u("api/v1/user/"+n)}function g(n,e){return a("api/v1/user/"+n,e)}function x(){return u("api/v1/roles")}function Z(n){return s("api/v1/roles",n)}function m(n,e){return a("api/v1/role/"+n,e)}function v(n){return u("api/v1/role/"+n)}function b(){return u("api/v1/hostels-list/")}function j(){return u("api/v1/booked-hostels-list/")}function k(n){return a("api/v1/accept-hostel-book/"+n,{})}function y(n){return a("api/v1/reject-hostel-book/"+n,{})}},61805:function(n,e,t){t.d(e,{J:function(){return o},yd:function(){return r}});var r={PENDING:0,ACCEPTED:1,REJECTED:2},o={TODAY:"today",THIS_WEEK:"this_week",MONTHLY:"monthly"}}}]);