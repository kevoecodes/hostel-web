"use strict";(self.webpackChunkioms_web=self.webpackChunkioms_web||[]).push([[1360],{4869:function(n,e,t){var r=t(29439),i=t(9019),s=t(88797),o=t(51405),c=t(61113),a=t(73319),u=t(40621),l=t(47313),d=t(75697),h=t(46417);e.Z=function(n){var e=n.amount,t=n.title,f=void 0===t?"AMOUNT":t,x=(0,l.useState)(0),p=(0,r.Z)(x,2),v=p[0],j=p[1];return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(i.ZP,{container:!0,spacing:4,alignItems:"center",justifyContent:"center",children:(0,h.jsx)(i.ZP,{item:!0,xs:4,children:(0,h.jsx)(a.k,{title:f,value:(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(u.Z,{style:{width:300},children:(0,h.jsxs)(i.ZP,{container:!0,alignItems:"center",justifyContent:"center",children:[(0,h.jsx)(i.ZP,{xs:5,children:(0,h.jsx)(s.Z,{labelId:"select-currency",id:"demo-simple-select-autowidth",value:v,onChange:function(n){j(n.target.value)},autoWidth:!0,children:(0,h.jsx)(o.Z,{value:0,children:"TZS"})})}),(0,h.jsx)(i.ZP,{xs:7,children:(0,h.jsx)(c.Z,{variant:"h5",children:(0,d.oB)(e)})})]})})})})})})})}},3797:function(n,e,t){t(47313),t(40621);var r=t(95795),i=t(55585),s=t(69099),o=t(58467),c=t(46417);e.Z=function(n){var e=n.children,t=n.permission,a=n.unauthorized_page,u=void 0!==a&&a,l=n.withOtherDeps,d=void 0===l?function(){return!0}:l,h=(0,o.s0)();return(0,c.jsx)(c.Fragment,{children:r.Z.has_permission(t)&&d()?e:u?(0,c.jsx)(i.ZP,{status:"403",title:"403",subTitle:"Sorry, you are not authorized to access this page.",extra:(0,c.jsx)(s.Z,{onClick:function(){h("/",{replace:!0})},type:"primary",children:"Back Home"})}):(0,c.jsx)(c.Fragment,{children:" "})})}},75697:function(n,e,t){t.d(e,{AB:function(){return l},Rn:function(){return h},Vo:function(){return x},ec:function(){return u},gg:function(){return d},oB:function(){return f}});var r=t(61805),i=t(66212),s=t(36594),o=t(84296),c=t(77841),a=t(46417),u=function(n){return n===r.R2.PENDING?(0,a.jsx)(i.Z,{color:"secondary",label:"Pending"}):n===r.R2.ONPROGRESS?(0,a.jsx)(i.Z,{color:"primary",label:"On Progress"}):n===r.R2.COMPLETE?(0,a.jsx)(i.Z,{color:"success",label:"Complete"}):void 0},l=function(n){return n===r.SU.PENDING?(0,a.jsx)(i.Z,{color:"secondary",label:"Pending"}):n===r.SU.VERIFIED?(0,a.jsx)(i.Z,{color:"warning",label:"Verified"}):n===r.SU.APPROVED?(0,a.jsx)(i.Z,{color:"success",label:"Approved"}):n===r.SU.PAID?(0,a.jsx)(i.Z,{color:"primary",label:"Paid"}):n===r.SU.REJECTED?(0,a.jsx)(i.Z,{color:"error",label:"Rejected"}):void 0},d=function(n){return new Date(n).toLocaleString()},h=function(n){(0,s.nD)().then((function(e){console.log(e),n(e)})).catch((function(n){console.log(n)}))},f=function(n){return n.toLocaleString("en-US",{style:"currency",currency:"TZS"})},x=function(n){n.response?401===n.response.status?(c.Z.error("Unauthorized request, please login again"),null!==o.VK&&(0,o.VK)("/login",{replace:!0}),localStorage.clear()):400===n.response.status||500===n.response.status||n.response&&429===n.response.status||console.log("Error occurred, status: "+n.response.status):c.Z.error("No network available, Please connect to a Network")}},77841:function(n,e,t){var r=t(15671),i=t(43144),s=t(84296),o=function(){function n(){(0,r.Z)(this,n)}return(0,i.Z)(n,[{key:"success",value:function(n){s.sp&&s.sp.enqueueSnackbar(n,{variant:"success"})}},{key:"error",value:function(n){s.sp&&s.sp.enqueueSnackbar(n,{variant:"error"})}},{key:"warning",value:function(n){s.sp&&s.sp.enqueueSnackbar(n,{variant:"warning"})}}]),n}();e.Z=new o},73319:function(n,e,t){t.d(e,{k:function(){return o}});var r=t(9019),i=t(61113),s=t(46417),o=function(n){var e=n.title,t=n.value,o=(n.alignItems,n.justifyContent),c=void 0===o?"space-evenly":o;return(0,s.jsxs)(r.ZP,{container:!0,alignItems:"center",justifyContent:c,children:[(0,s.jsx)(r.ZP,{item:!0,xs:!0,children:(0,s.jsx)("span",{children:(0,s.jsxs)(i.Z,{variant:"h6",style:{fontWeight:"bold"},children:[e,":"]})})}),(0,s.jsx)(r.ZP,{item:!0,xs:!0,children:t})]})}},29814:function(n,e,t){t.d(e,{Ae:function(){return h},GQ:function(){return d},tv:function(){return l}});var r=t(47313),i=t(84488),s=t(42832),o=t(9019),c=t(40621),a=t(41394),u=t(46417),l=function(n){var e=n.children,t=n.isLoading;(0,r.useEffect)((function(){}),[]);var a=(0,u.jsx)(c.Z,{title:(0,u.jsx)(i.Z,{sx:{width:{xs:120,md:180}}}),secondary:(0,u.jsx)(i.Z,{animation:"wave",variant:"rectangular",width:24,height:24}),children:(0,u.jsxs)(s.Z,{spacing:1,children:[(0,u.jsx)(i.Z,{}),(0,u.jsx)(i.Z,{sx:{height:64},animation:"wave",variant:"rectangular"}),(0,u.jsx)(i.Z,{}),(0,u.jsx)(i.Z,{})]})});return(0,u.jsxs)(u.Fragment,{children:[t&&(0,u.jsx)(o.ZP,{container:!0,spacing:3,children:(0,u.jsx)(o.ZP,{item:!0,xs:12,children:a})}),!t&&e]})},d=function(n){var e=n.children,t=n.isLoading;return(0,u.jsxs)(u.Fragment,{children:[t&&(0,u.jsx)(o.ZP,{container:!0,spacing:3,p:3,mt:1,children:(0,u.jsx)(o.ZP,{item:!0,xs:12,children:(0,u.jsxs)(s.Z,{spacing:1,children:[(0,u.jsx)(i.Z,{sx:{height:30},animation:"wave",variant:"rounded"}),(0,u.jsx)(i.Z,{sx:{height:30},animation:"wave",variant:"rounded"}),(0,u.jsx)(i.Z,{sx:{height:30},animation:"wave",variant:"rounded"}),(0,u.jsx)(i.Z,{sx:{height:30},animation:"wave",variant:"rounded"}),(0,u.jsx)(i.Z,{sx:{height:30},animation:"wave",variant:"rounded"})]})})}),!t&&e]})},h=function(n){var e=n.children,t=n.isLoading;(0,r.useEffect)((function(){}),[]);var s=(0,u.jsx)(a.Z,{hoverable:!0,style:{width:140},cover:(0,u.jsx)(i.Z,{sx:{width:{xs:140,md:140},height:180}}),children:(0,u.jsx)(i.Z,{})});return(0,u.jsxs)(u.Fragment,{children:[t&&(0,u.jsxs)(o.ZP,{container:!0,mb:3,mt:1,alignItems:"center",justifyContent:"flex-start",children:[(0,u.jsx)(o.ZP,{item:!0,xs:2,children:s}),(0,u.jsx)(o.ZP,{item:!0,xs:2,children:s}),(0,u.jsx)(o.ZP,{item:!0,xs:2,children:s}),(0,u.jsx)(o.ZP,{item:!0,xs:2,children:s}),(0,u.jsx)(o.ZP,{item:!0,xs:2,children:s}),(0,u.jsx)(o.ZP,{item:!0,xs:2,children:s})]}),!t&&e]})}},91728:function(n,e,t){t.r(e),t.d(e,{default:function(){return R}});var r=t(29439),i=t(29814),s=t(40621),o=t(9019),c=t(57829),a=t(75697),u=t(47313),l=t(36594),d=t(77841),h=t(58467),f=t(19536),x=t(61113),p=t(42832),v=t(69099),j=t(73319),m=t(61805),g=t(55585),Z=t(14267),P=t(4869),b=t(3797),y=t(99743),_=t(46417),E=function(n){var e=n.float_request,t=n.editFloatRequest;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(o.ZP,{container:!0,spacing:4,mb:3,mt:1,children:[(0,_.jsxs)(o.ZP,{item:!0,xs:7,children:[(0,_.jsx)(f.Z,{children:"Float Request details"}),(0,_.jsx)(o.ZP,{container:!0,children:(0,_.jsx)(o.ZP,{item:!0,xs:12,mt:1,children:(0,_.jsx)(j.k,{title:"Request Details",value:(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(s.Z,{children:(0,_.jsx)(x.Z,{variant:"h6",children:e.details})})})})})})]}),(0,_.jsxs)(o.ZP,{item:!0,xs:5,children:[(0,_.jsx)(f.Z,{children:"Voucher details"}),e.status===m.SU.REJECTED?(0,_.jsx)(g.ZP,{status:"error",title:"Rejected",subTitle:(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)(_.Fragment,{children:["Rejected by"," ",(0,_.jsxs)("span",{style:{fontWeight:"bold"},children:[" ",voucher.rejected_by.first_name," ",voucher.rejected_by.last_name]})," ","at ",(0,_.jsxs)("span",{style:{fontWeight:"bold"},children:[" ",(0,a.gg)(voucher.rejected_at)," "]})]})})}):(0,_.jsx)(Z.Z,{voucher:e})]})]}),(0,_.jsx)(P.Z,{amount:e.amount}),(0,_.jsx)(o.ZP,{container:!0,spacing:4,mb:3,mt:1,alignItems:"center",justifyContent:"flex-end",children:(0,_.jsxs)(p.Z,{spacing:2,direction:"row",children:[(0,_.jsx)(b.Z,{permission:y._.VOUCHER_REJECT,children:(0,_.jsx)(v.Z,{variant:"outlined",color:"error",onClick:function(){return t(m.SU.REJECTED)},children:"Reject"})}),(0,_.jsx)(b.Z,{permission:y._.VOUCHER_VERIFY,withOtherDeps:function(){return e.status===m.SU.PENDING},children:(0,_.jsx)(v.Z,{variant:"outlined",color:"success",onClick:function(){return t(m.SU.VERIFIED)},children:"Verify"})}),(0,_.jsx)(b.Z,{permission:y._.VOUCHER_APPROVE,withOtherDeps:function(){return e.status===m.SU.VERIFIED},children:(0,_.jsx)(v.Z,{variant:"outlined",color:"success",onClick:function(){return t(m.SU.APPROVED)},children:"Approve"})}),(0,_.jsx)(b.Z,{permission:y._.VOUCHER_PAY,withOtherDeps:function(){return e.status===m.SU.APPROVED},children:(0,_.jsx)(v.Z,{variant:"outlined",color:"success",onClick:function(){return t(m.SU.PAID)},children:"Paid"})})]})})]})},R=function(){var n=(0,u.useState)(!1),e=(0,r.Z)(n,2),t=e[0],f=e[1],x=(0,u.useState)(null),p=(0,r.Z)(x,2),v=p[0],j=p[1],m=(0,h.s0)(),g=(0,h.UO)();return(0,u.useEffect)((function(){(0,l.MI)(g.float_request_id).then((function(n){console.log(n),j(n),f(!1)})).catch((function(n){console.log(n),d.Z.error("Failed to load Float request details"),m("/float-requests",{replace:!0})}))}),[]),(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(i.tv,{isLoading:t,children:null!==v&&(0,_.jsx)(s.Z,{title:(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)(o.ZP,{container:!0,spacing:3,alignItems:"center",children:[(0,_.jsxs)(o.ZP,{item:!0,xs:3,children:["Voucher Number: #",v.request_number]}),(0,_.jsx)(o.ZP,{item:!0,xs:12,md:6,lg:6,sx:{ml:"auto"},children:(0,_.jsx)(o.ZP,{container:!0,alignItems:"center",justifyContent:"flex-end",pr:2,children:(0,a.AB)(v.status)})})]})}),content:!1,border:!1,boxShadow:!0,children:(0,_.jsx)(c.Z,{sx:{p:{xs:2,sm:3,md:4,xl:5}},children:(0,_.jsx)(E,{float_request:v})})})})})}},14267:function(n,e,t){var r=t(81190),i=t(75697),s=t(61805),o=t(46417);e.Z=function(n){var e=n.voucher;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(r.Z,{progressDot:!0,current:e.status,direction:"vertical",items:[{title:"Requested",description:(0,o.jsxs)(o.Fragment,{children:["Requested by"," ",(0,o.jsxs)("span",{style:{fontWeight:"bold"},children:[" ",e.created_by.first_name," ",e.created_by.last_name]})," ","at ",(0,o.jsxs)("span",{style:{fontWeight:"bold"},children:[" ",(0,i.gg)(e.created_at)," "]})]})},{title:"Verified",description:(0,o.jsx)(o.Fragment,{children:e.status>=s.SU.VERIFIED&null!==e.verified_by?(0,o.jsxs)(o.Fragment,{children:[" ","Verified_by"," ",(0,o.jsxs)("span",{style:{fontWeight:"bold"},children:[" ",e.verified_by.first_name," ",e.verified_by.last_name]})," ","at ",(0,o.jsxs)("span",{style:{fontWeight:"bold"},children:[" ",(0,i.gg)(e.verified_at)," "]})," "]}):"Not verified"})},{title:"Approved",description:(0,o.jsx)(o.Fragment,{children:e.status>=s.SU.APPROVED&&null!==e.approved_by?(0,o.jsxs)(o.Fragment,{children:[" ","Approved by"," ",(0,o.jsxs)("span",{style:{fontWeight:"bold"},children:[" ",e.approved_by.first_name," ",e.approved_by.last_name]})," ","at ",(0,o.jsxs)("span",{style:{fontWeight:"bold"},children:[" ",(0,i.gg)(e.approved_at)," "]})]}):"Not Aprroved"})},{title:"Paid",description:(0,o.jsx)(o.Fragment,{children:e.status===s.SU.PAID&&null!==e.paid_by?(0,o.jsxs)(o.Fragment,{children:[" ","Payments done by"," ",(0,o.jsxs)("span",{style:{fontWeight:"bold"},children:[" ",e.paid_by.first_name," ",e.paid_by.last_name]})," ","at ",(0,o.jsxs)("span",{style:{fontWeight:"bold"},children:[" ",(0,i.gg)(e.paid_at)," "]})]}):"No payments done"})}]})})}},36594:function(n,e,t){t.d(e,{AG:function(){return I},Bl:function(){return F},Bm:function(){return U},CT:function(){return _},GV:function(){return b},Gn:function(){return S},HL:function(){return w},JN:function(){return k},MI:function(){return V},OP:function(){return f},PB:function(){return Z},Q4:function(){return A},Qb:function(){return l},SP:function(){return R},Um:function(){return p},W0:function(){return O},b6:function(){return C},bu:function(){return m},gi:function(){return x},kA:function(){return j},kl:function(){return y},l2:function(){return E},nD:function(){return v},r2:function(){return P},rW:function(){return h},tk:function(){return N},vU:function(){return g},vy:function(){return d},xr:function(){return D}});var r=t(56573),i=t(41209),s=t(75697);function o(n,e){return new Promise((function(t,o){r.Z.post(i.D.apiURL+n,e).then((function(n){n.headers,t(n.data)})).catch((function(n){(0,s.Vo)(n),o(n)}))}))}function c(n){return new Promise((function(e,t){r.Z.get(i.D.apiURL+n,{headers:{Authorization:"Token "+JSON.parse(localStorage.getItem("token"))}}).then((function(n){e(n.data)})).catch((function(n){(0,s.Vo)(n),t(n)}))}))}function a(n,e){return new Promise((function(t,o){r.Z.post(i.D.apiURL+n,e,{headers:{Authorization:"Token "+JSON.parse(localStorage.getItem("token"))}}).then((function(n){t(n.data)})).catch((function(n){(0,s.Vo)(n),o(n)}))}))}function u(n,e){return new Promise((function(t,o){r.Z.put(i.D.apiURL+n,e,{headers:{Authorization:"Token "+JSON.parse(localStorage.getItem("token"))}}).then((function(n){t(n.data)})).catch((function(n){(0,s.Vo)(n),o(n)}))}))}function l(n,e){var t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r={};return""!==t&&(r.mfaCode=t),o("api/auth/login",{email:n,password:e},!1)}function d(n,e,t){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i={};return""!==r&&(i.mfaCode=r),a("api/auth/reset-password/"+t,{password:n,confirm_password:e},!1)}function h(){return c("api/v1/users-list/")}function f(n){return a("api/v1/register-user",n)}function x(n){return c("api/v1/user/"+n)}function p(n,e){return u("api/v1/user/"+n,e)}function v(){return c("api/v1/roles")}function j(n){return a("api/v1/roles",n)}function m(n,e){return u("api/v1/role/"+n,e)}function g(n){return c("api/v1/role/"+n)}function Z(n){return a("api/v1/bls",n)}function P(){return c("api/v1/bls-list/")}function b(n){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=[e?"include_charges=".concat("true"):"",t?"include_timeline=".concat("true"):"",r?"include_containers=".concat("true"):""].filter(Boolean).join("&"),s="api/v1/bl/".concat(n).concat(i?"?".concat(i):"");return c(s)}function y(n){return c("api/v1/bl-attachments?bl_id="+n)}function _(){return c("api/v1/charges-list/")}function E(){return c("api/v1/bl-charges-list/")}function R(n){return a("api/v1/bl-charges",n)}function S(n){return c("api/v1/bl-charge/"+n)}function w(n,e){return u("api/v1/bl-charge/"+n,e)}function D(n){return c("api/v1/bl-charge-attachments?bl_charge_id="+n)}function I(n){return a("api/v1/vouchers",n)}function U(){return c("api/v1/vouchers-list/")}function k(n){return c("api/v1/voucher/"+n)}function C(n,e){return u("api/v1/voucher/"+n,e)}function F(n){return c("api/v1/voucher-attachments?voucher_id="+n)}function A(){return c("api/v1/float-requests-list/")}function V(n){return c("api/v1/float-request/"+n)}function O(n){return a("api/v1/float-requests",n)}function N(){return c("api/v1/dash-stats")}},41209:function(n,e,t){t.d(e,{D:function(){return r}});var r={apiURL:"https://api.starvisiontz.com/",socketURL:"wss://socket.starvisiontz.com/",mediaURL:"https://media.starvisiontz.com/v1/"}},61805:function(n,e,t){t.d(e,{J:function(){return o},R2:function(){return i},SU:function(){return r},sy:function(){return s}});var r={PENDING:0,VERIFIED:1,APPROVED:2,PAID:3,REJECTED:4},i={PENDING:0,ONPROGRESS:1,COMPLETE:2},s={DETAILS:"0",ATTACHMENTS:"1",BL_CHARGES:"2"},o={TODAY:"today",THIS_WEEK:"this_week",MONTHLY:"monthly"}}}]);