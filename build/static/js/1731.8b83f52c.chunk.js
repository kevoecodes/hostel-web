"use strict";(self.webpackChunkioms_web=self.webpackChunkioms_web||[]).push([[1731],{35509:function(n,e,r){var t=r(1413),i=r(93433),o=r(66736),a=r(55116),s=r(89939),c=r(41209),u=r(46417),l=a.Z.Dragger;e.Z=function(n){var e=n.setFileNames,r={name:"file",multiple:!0,action:c.D.apiURL+"api/v1/upload-file",onChange:function(n){console.log(n);var r=n.file,t=r.status,o=r.response;"uploading"!==t&&console.log(n.file,n.fileList),"done"===t?(e((function(n){return[].concat((0,i.Z)(n),[{file_name:o.name}])})),s.ZP.success("".concat(n.file.name," file uploaded successfully.")).then()):"error"===t&&s.ZP.error("".concat(n.file.name," file upload failed.")).then()},onDrop:function(n){console.log("Dropped files",n.dataTransfer.files)}};return(0,u.jsxs)(l,(0,t.Z)((0,t.Z)({},r),{},{children:[(0,u.jsx)("p",{className:"ant-upload-drag-icon",children:(0,u.jsx)(o.Z,{})}),(0,u.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),(0,u.jsx)("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload. Strictly prohibited from uploading company data or other banned files."})]}))}},3797:function(n,e,r){r(47313),r(40621);var t=r(95795),i=r(55585),o=r(69099),a=r(58467),s=r(46417);e.Z=function(n){var e=n.children,r=n.permission,c=n.unauthorized_page,u=void 0!==c&&c,l=n.withOtherDeps,d=void 0===l?function(){return!0}:l,f=(0,a.s0)();return(0,s.jsx)(s.Fragment,{children:t.Z.has_permission(r)&&d()?e:u?(0,s.jsx)(i.ZP,{status:"403",title:"403",subTitle:"Sorry, you are not authorized to access this page.",extra:(0,s.jsx)(o.Z,{onClick:function(){f("/",{replace:!0})},type:"primary",children:"Back Home"})}):(0,s.jsx)(s.Fragment,{children:" "})})}},75697:function(n,e,r){r.d(e,{AB:function(){return l},Rn:function(){return f},Vo:function(){return p},ec:function(){return u},gg:function(){return d},oB:function(){return h}});var t=r(61805),i=r(66212),o=r(36594),a=r(84296),s=r(77841),c=r(46417),u=function(n){return n===t.R2.PENDING?(0,c.jsx)(i.Z,{color:"secondary",label:"Pending"}):n===t.R2.ONPROGRESS?(0,c.jsx)(i.Z,{color:"primary",label:"On Progress"}):n===t.R2.COMPLETE?(0,c.jsx)(i.Z,{color:"success",label:"Complete"}):void 0},l=function(n){return n===t.SU.PENDING?(0,c.jsx)(i.Z,{color:"secondary",label:"Pending"}):n===t.SU.VERIFIED?(0,c.jsx)(i.Z,{color:"warning",label:"Verified"}):n===t.SU.APPROVED?(0,c.jsx)(i.Z,{color:"success",label:"Approved"}):n===t.SU.PAID?(0,c.jsx)(i.Z,{color:"primary",label:"Paid"}):n===t.SU.REJECTED?(0,c.jsx)(i.Z,{color:"error",label:"Rejected"}):void 0},d=function(n){return new Date(n).toLocaleString()},f=function(n){(0,o.nD)().then((function(e){console.log(e),n(e)})).catch((function(n){console.log(n)}))},h=function(n){return n.toLocaleString("en-US",{style:"currency",currency:"TZS"})},p=function(n){n.response?401===n.response.status?(s.Z.error("Unauthorized request, please login again"),null!==a.VK&&(0,a.VK)("/login",{replace:!0}),localStorage.clear()):400===n.response.status||500===n.response.status||n.response&&429===n.response.status||console.log("Error occurred, status: "+n.response.status):s.Z.error("No network available, Please connect to a Network")}},77841:function(n,e,r){var t=r(15671),i=r(43144),o=r(84296),a=function(){function n(){(0,t.Z)(this,n)}return(0,i.Z)(n,[{key:"success",value:function(n){o.sp&&o.sp.enqueueSnackbar(n,{variant:"success"})}},{key:"error",value:function(n){o.sp&&o.sp.enqueueSnackbar(n,{variant:"error"})}},{key:"warning",value:function(n){o.sp&&o.sp.enqueueSnackbar(n,{variant:"warning"})}}]),n}();e.Z=new a},1731:function(n,e,r){r.r(e),r.d(e,{default:function(){return B}});var t=r(74165),i=r(15861),o=r(93433),a=r(29439),s=r(3463),c=r(57829),u=r(19536),l=r(9019),d=r(42832),f=r(23306),h=r(49914),p=r(15480),m=r(69490),g=r(7410),x=r(47313),v=r(40621),Z=r(4942),b=r(1413),j=r(47131),_=r(66469),P=r(71049),S=r(46417),C=function(n){var e=n.container_list,r=void 0===e?[]:e,t=n.setContainerList,i=n.onAdd,o=n.onDelete,a=function(n,e,r){t((function(t){return t.map((function(t){if(t.index===n){var i=(0,b.Z)((0,b.Z)({},t),{},(0,Z.Z)({},e,r));return console.log(i),i}return t}))}))};return r.map((function(n,e){return(0,S.jsxs)(l.ZP,{container:!0,spacing:3,mb:3,children:[(0,S.jsx)(l.ZP,{item:!0,xs:1,children:(0,S.jsx)(l.ZP,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",children:0===n.index?(0,S.jsx)(j.Z,{color:"primary","aria-label":"add an alarm",onClick:i,children:(0,S.jsx)(P.Z,{})}):(0,S.jsx)(j.Z,{color:"error","aria-label":"add an alarm",onClick:function(){return o(e)},children:(0,S.jsx)(_.Z,{})})})}),(0,S.jsx)(l.ZP,{item:!0,xs:4,children:(0,S.jsxs)(d.Z,{spacing:1,children:[(0,S.jsx)(f.Z,{htmlFor:"bootstrap",children:"Container Number"}),(0,S.jsx)(h.Z,{id:"email-login",type:"text",name:"first_name",onChange:function(e){return a(n.index,"container_no",e.target.value)},placeholder:"eg. P099291",fullWidth:!0})]})}),(0,S.jsx)(l.ZP,{item:!0,xs:4,children:(0,S.jsxs)(d.Z,{spacing:1,children:[(0,S.jsx)(f.Z,{htmlFor:"bootstrap",children:"Container Size"}),(0,S.jsx)(h.Z,{id:"email-login",type:"text",name:"first_name",onChange:function(e){return a(n.index,"container_size",e.target.value)},placeholder:"eg. 2PKGS",fullWidth:!0})]})})]},n.index)}))},y=r(36594),D=r(77841),E=r(58467),k=r(51406),w=r(35509),R=r(3797),A=r(99743),B=function(){var n=(0,x.useState)(!1),e=(0,a.Z)(n,2),r=e[0],Z=e[1],b=(0,x.useState)([]),j=(0,a.Z)(b,2),_=j[0],P=j[1],B=(0,x.useState)([{index:0,container_no:"",container_size:""}]),N=(0,a.Z)(B,2),L=N[0],z=N[1],O=(0,E.s0)(),T=function(){z((function(n){return[].concat((0,o.Z)(n),[{index:Math.random(),container_no:"",container_size:""}])}))},U=function(n){Z(!0),n.containers=L,n.attachments=_,(0,y.PB)(n).then((function(n){console.log("Response"),D.Z.success("Bill of loading successfully added"),O("/bls",{replace:!0})})).catch((function(n){Z(!1),D.Z.error("Failed to add Bill of loading")}))};return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(R.Z,{permission:A._.BL_CREATE,unauthorized_page:!0,children:(0,S.jsx)(v.Z,{title:"Adding Bill Of Loading",content:!1,border:!1,boxShadow:!0,children:(0,S.jsx)(c.Z,{sx:{p:{xs:2,sm:3,md:4,xl:5}},children:(0,S.jsx)(g.J9,{initialValues:{bl_number:"",consignee_name:"",consignee_cellphone:"",consignee_address:"",containers:[],attachments:[],submit:null},validationSchema:s.Ry().shape({bl_number:s.Z_().max(255).required("Bl number is required"),consignee_cellphone:s.Z_().max(255).required("Consignee cellphone is required"),consignee_address:s.Z_().max(255).required("Consignee address is required"),consignee_name:s.Z_().max(255).required("Consignee name is required")}),onSubmit:function(){var n=(0,i.Z)((0,t.Z)().mark((function n(e,r){return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r.setErrors,r.setStatus,r.setSubmitting,U(e);case 2:case"end":return n.stop()}}),n)})));return function(e,r){return n.apply(this,arguments)}}(),children:function(n){var e=n.errors,t=n.handleBlur,i=n.handleChange,o=n.handleSubmit,a=(n.isSubmitting,n.touched),s=n.values;return(0,S.jsxs)("form",{noValidate:!0,onSubmit:o,children:[(0,S.jsx)(u.Z,{textAlign:"left",children:" Bill of Loading Details"}),(0,S.jsxs)(l.ZP,{container:!0,spacing:3,mb:3,children:[(0,S.jsx)(l.ZP,{item:!0,xs:6,children:(0,S.jsxs)(d.Z,{spacing:1,children:[(0,S.jsx)(f.Z,{htmlFor:"bootstrap",children:"BL Number"}),(0,S.jsx)(h.Z,{id:"email-login",type:"text",value:s.bl_number,name:"bl_number",onBlur:t,onChange:i,placeholder:"eg. P3023423",fullWidth:!0,error:Boolean(a.bl_number&&e.bl_number)}),a.bl_number&&e.bl_number&&(0,S.jsx)(p.Z,{error:!0,id:"standard-weight-helper-text-email-login",children:e.bl_number})]})}),(0,S.jsx)(l.ZP,{item:!0,xs:6,children:(0,S.jsxs)(d.Z,{spacing:1,children:[(0,S.jsx)(u.Z,{style:{marginBottom:10},textAlign:"left",children:"Attachments"}),(0,S.jsx)(w.Z,{setFileNames:P})]})})]}),(0,S.jsx)(u.Z,{textAlign:"left",children:" Consignee Details"}),(0,S.jsxs)(l.ZP,{container:!0,spacing:3,mb:3,children:[(0,S.jsx)(l.ZP,{item:!0,xs:4,children:(0,S.jsxs)(d.Z,{spacing:1,children:[(0,S.jsx)(f.Z,{htmlFor:"bootstrap",children:"Customer Name"}),(0,S.jsx)(h.Z,{id:"email-login",type:"text",value:s.consignee_name,name:"consignee_name",onBlur:t,onChange:i,placeholder:"eg. John Doe",fullWidth:!0,error:Boolean(a.consignee_name&&e.consignee_name)}),a.consignee_name&&e.consignee_name&&(0,S.jsx)(p.Z,{error:!0,id:"standard-weight-helper-text-email-login",children:e.consignee_name})]})}),(0,S.jsx)(l.ZP,{item:!0,xs:4,children:(0,S.jsxs)(d.Z,{spacing:1,children:[(0,S.jsx)(f.Z,{htmlFor:"bootstrap",children:"Phone Number"}),(0,S.jsx)(h.Z,{id:"email-login",type:"text",value:s.consignee_cellphone,name:"consignee_cellphone",onBlur:t,onChange:i,placeholder:"eg. 2556444444",fullWidth:!0,error:Boolean(a.consignee_cellphone&&e.consignee_cellphone)}),a.consignee_cellphone&&e.consignee_cellphone&&(0,S.jsx)(p.Z,{error:!0,id:"standard-weight-helper-text-email-login",children:e.consignee_cellphone})]})}),(0,S.jsx)(l.ZP,{item:!0,xs:4,children:(0,S.jsxs)(d.Z,{spacing:1,children:[(0,S.jsx)(f.Z,{htmlFor:"bootstrap",children:"Address"}),(0,S.jsx)(h.Z,{id:"email-login",type:"text",value:s.consignee_address,name:"consignee_address",onBlur:t,onChange:i,placeholder:"eg. Ubungo, Daresalaam",fullWidth:!0,error:Boolean(a.consignee_address&&e.consignee_address)}),a.consignee_address&&e.consignee_address&&(0,S.jsx)(p.Z,{error:!0,id:"standard-weight-helper-text-email-login",children:e.consignee_address})]})})]}),(0,S.jsx)(u.Z,{style:{marginBottom:10},textAlign:"left",children:"Containers Details"}),(0,S.jsx)(C,{container_list:L,setContainerList:z,onAdd:T,onDelete:function(n){return e=n,void z((function(n){return n.filter((function(n,r){return e!==r}))}));var e}}),(0,S.jsx)(l.ZP,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",mg:3,children:(0,S.jsx)(l.ZP,{item:!0,xs:6,children:(0,S.jsx)(m.Z,{children:(0,S.jsx)(k.Z,{disableElevation:!0,loading:r,disabled:r,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Submit"})})})})]})}})})})})})}},36594:function(n,e,r){r.d(e,{AG:function(){return w},Bl:function(){return N},Bm:function(){return R},CT:function(){return S},GV:function(){return _},Gn:function(){return D},HL:function(){return E},JN:function(){return A},MI:function(){return z},OP:function(){return h},PB:function(){return b},Q4:function(){return L},Qb:function(){return l},SP:function(){return y},Um:function(){return m},W0:function(){return O},b6:function(){return B},bu:function(){return v},gi:function(){return p},kA:function(){return x},kl:function(){return P},l2:function(){return C},nD:function(){return g},r2:function(){return j},rW:function(){return f},tk:function(){return T},vU:function(){return Z},vy:function(){return d},xr:function(){return k}});var t=r(56573),i=r(41209),o=r(75697);function a(n,e){return new Promise((function(r,a){t.Z.post(i.D.apiURL+n,e).then((function(n){n.headers,r(n.data)})).catch((function(n){(0,o.Vo)(n),a(n)}))}))}function s(n){return new Promise((function(e,r){t.Z.get(i.D.apiURL+n,{headers:{Authorization:"Token "+JSON.parse(localStorage.getItem("token"))}}).then((function(n){e(n.data)})).catch((function(n){(0,o.Vo)(n),r(n)}))}))}function c(n,e){return new Promise((function(r,a){t.Z.post(i.D.apiURL+n,e,{headers:{Authorization:"Token "+JSON.parse(localStorage.getItem("token"))}}).then((function(n){r(n.data)})).catch((function(n){(0,o.Vo)(n),a(n)}))}))}function u(n,e){return new Promise((function(r,a){t.Z.put(i.D.apiURL+n,e,{headers:{Authorization:"Token "+JSON.parse(localStorage.getItem("token"))}}).then((function(n){r(n.data)})).catch((function(n){(0,o.Vo)(n),a(n)}))}))}function l(n,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",t={};return""!==r&&(t.mfaCode=r),a("api/auth/login",{email:n,password:e},!1)}function d(n,e,r){var t=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i={};return""!==t&&(i.mfaCode=t),c("api/auth/reset-password/"+r,{password:n,confirm_password:e},!1)}function f(){return s("api/v1/users-list/")}function h(n){return c("api/v1/register-user",n)}function p(n){return s("api/v1/user/"+n)}function m(n,e){return u("api/v1/user/"+n,e)}function g(){return s("api/v1/roles")}function x(n){return c("api/v1/roles",n)}function v(n,e){return u("api/v1/role/"+n,e)}function Z(n){return s("api/v1/role/"+n)}function b(n){return c("api/v1/bls",n)}function j(){return s("api/v1/bls-list/")}function _(n){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],t=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=[e?"include_charges=".concat("true"):"",r?"include_timeline=".concat("true"):"",t?"include_containers=".concat("true"):""].filter(Boolean).join("&"),o="api/v1/bl/".concat(n).concat(i?"?".concat(i):"");return s(o)}function P(n){return s("api/v1/bl-attachments?bl_id="+n)}function S(){return s("api/v1/charges-list/")}function C(){return s("api/v1/bl-charges-list/")}function y(n){return c("api/v1/bl-charges",n)}function D(n){return s("api/v1/bl-charge/"+n)}function E(n,e){return u("api/v1/bl-charge/"+n,e)}function k(n){return s("api/v1/bl-charge-attachments?bl_charge_id="+n)}function w(n){return c("api/v1/vouchers",n)}function R(){return s("api/v1/vouchers-list/")}function A(n){return s("api/v1/voucher/"+n)}function B(n,e){return u("api/v1/voucher/"+n,e)}function N(n){return s("api/v1/voucher-attachments?voucher_id="+n)}function L(){return s("api/v1/float-requests-list/")}function z(n){return s("api/v1/float-request/"+n)}function O(n){return c("api/v1/float-requests",n)}function T(){return s("api/v1/dash-stats")}},41209:function(n,e,r){r.d(e,{D:function(){return t}});var t={apiURL:"https://api.starvisiontz.com/",socketURL:"wss://socket.starvisiontz.com/",mediaURL:"https://media.starvisiontz.com/v1/"}},61805:function(n,e,r){r.d(e,{J:function(){return a},R2:function(){return i},SU:function(){return t},sy:function(){return o}});var t={PENDING:0,VERIFIED:1,APPROVED:2,PAID:3,REJECTED:4},i={PENDING:0,ONPROGRESS:1,COMPLETE:2},o={DETAILS:"0",ATTACHMENTS:"1",BL_CHARGES:"2"},a={TODAY:"today",THIS_WEEK:"this_week",MONTHLY:"monthly"}},71049:function(n,e,r){var t=r(64836);e.Z=void 0;var i=t(r(45045)),o=r(46417),a=(0,i.default)((0,o.jsx)("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"AddCircleOutlineOutlined");e.Z=a},66469:function(n,e,r){var t=r(64836);e.Z=void 0;var i=t(r(45045)),o=r(46417),a=(0,i.default)((0,o.jsx)("path",{d:"M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"RemoveCircleOutlineOutlined");e.Z=a}}]);